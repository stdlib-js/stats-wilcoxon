// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number-array@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-ranks@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-normal-cdf@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-signrank-cdf@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-tabulate@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-signum@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-contains@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";var x=c,y=u.isPrimitive,E=f.isPrimitive,T=s,O=v.isPrimitive,z=g,M=j,V=h,k=["two-sided","less","greater"],P=["pratt","wilcox","zsplit"];var F=function(e,t){if(!T(t))return new TypeError(V("invalid argument. Options argument must be an object. Value: `%s`.",t));if(M(t,"alpha")){if(e.alpha=t.alpha,!E(e.alpha)||z(e.alpha))return new TypeError(V("invalid option. `%s` option must be a number. Option: `%s`.","alpha",e.alpha));if(e.alpha<0||e.alpha>1)return new RangeError(V("invalid argument. Option `%s` must be a number in the range 0 to 1. Value: `%f`.","alpha",e.alpha))}if(M(t,"alternative")){if(e.alternative=t.alternative,!O(e.alternative))return new TypeError(V("invalid option. `%s` option must be a string. Option: `%s`.","alternative",e.alternative));if(!x(k,e.alternative))return new Error(V("invalid option. `%s` option must be one of %s. Option: `%s`.","alternative",k.join(", "),e.alternative))}if(M(t,"correction")&&(e.correction=t.correction,!y(e.correction)||z(e.correction)))return new TypeError(V("invalid option. `%s` option must be a boolean. Option: `%s`.","correction",e.alpha));if(M(t,"exact")&&(e.exact=t.exact,!y(e.exact)||z(e.exact)))return new TypeError(V("invalid option. `%s` option must be a boolean. Option: `%s`.","exact",e.alpha));if(M(t,"mu")&&(e.mu=t.mu,!E(e.mu)||z(e.mu)))return new TypeError(V("invalid option. `%s` option must be a number. Option: `%s`.","mu",e.mu));if(M(t,"zeroMethod")){if(e.zeroMethod=t.zeroMethod,!O(e.zeroMethod))return new TypeError(V("invalid option. `%s` option must be a string. Option: `%s`.","zeroMethod",e.alternative));if(!x(P,e.zeroMethod))return new Error(V("invalid option. `%s` option must be one of %s. Option: `%s`.","zeroMethod",P.join(", "),e.zeroMethod))}return null};function q(e,t){return e-t}var R=function(e){var t,i,s,r;for((e=e.slice()).sort(q),t=e.length,s=1,r=0;s<t;s++)i=e[s],e[r]!==i&&(e[r+=1]=i);return e.length=r+1,e},W=b,A=s,D=u.isPrimitive,S=j,B=w,C=h;var G=function(e){var t,i,s;if(i=4,t=!0,arguments.length>0){if(!A(e))throw new TypeError(C("invalid argument. First argument must be an options object. Value: `%s`.",e));if(S(e,"digits")){if(!W(e.digits))throw new TypeError(C("invalid option. `%s` option must be a positive integer. Option: `%s`.","digits",e.digits));i=e.digits}if(S(e,"decision")){if(!D(e.decision))throw new TypeError(C("invalid option. `%s` option must be a boolean. Option: `%s`.","decision",e.decision));t=e.decision}}switch(s="",s+=this.method,s+="\n\n",s+="Alternative hypothesis: ","Paired Wilcoxon signed rank test"===this.method?s+="Median of the difference `x - y` is ":s+="Median of `x` is ",this.alternative){case"two-sided":default:s+="not equal to ";break;case"less":s+="less than ";break;case"greater":s+="greater than "}return s+=this.nullValue,s+="\n\n",s+="    pValue: "+B(this.pValue,-i)+"\n",s+="    statistic: "+B(this.statistic,-i)+"\n",s+="\n",t&&(s+="Test Decision: ",this.rejected?s+="Reject null in favor of alternative at "+100*this.alpha+"% significance level":s+="Fail to reject null in favor of alternative at "+100*this.alpha+"% significance level",s+="\n"),s},H=e.primitives,I=t,J=i,K=s,L=r,N=n.factory,Q=o,U=a,X=l,Y=d,Z=m,$=p,_=h,ee=F,te=R,ie=G,se=N(0,1);var re=function(){var e,t,i,s,r,n,o,a,l,d,m,p,h,c,u,f,v,g,j,b,w,x,y,E,T,O,z,M,V;if(!I(M=arguments[0])&&!H(M))throw new TypeError(_("invalid argument. First argument must be a numeric array. Value: `%s`.",M));if(f=M.length,arguments.length>1)if(K(arguments[1]))i=arguments[1];else{if(!I(V=arguments[1])&&!H(V))throw new TypeError(_("invalid argument. `y` argument must be a numeric array. Value: `%s`.",V));if(f!==V.length)throw new Error("invalid arguments. The first and second arguments must have the same length.");arguments.length>2&&(i=arguments[2])}if(p={},i&&(u=ee(p,i)))throw u;if(b=p.mu||0,e=void 0===p.correction||p.correction,d=void 0===p.alpha?.05:p.alpha,f<2)throw new Error(_("invalid argument. First argument must contain at least two elements. Value: `%s`.",M));if(c=p.alternative||"two-sided","wilcox"===(t=p.zeroMethod||"wilcox")){if(y=[],V)for(E=0;E<f;E++)0!==(z=M[E]-V[E]-b)&&y.push(z);else for(E=0;E<f;E++)0!==M[E]&&y.push(M[E]-b);a=M.length-y.length}else if(y=new $(f),a=0,V)for(E=0;E<f;E++)y[E]=M[E]-V[E]-b,0===y[E]&&(a+=1);else for(E=0;E<f;E++)y[E]=M[E]-b,0===y[E]&&(a+=1);if(a===f)throw new Error("`x` or `x - y` cannot be zero for all elements.");for(f=y.length,j=new $(f),E=0;E<f;E++)j[E]=Z(y[E]);for(T=L(j),o=0,l=0,E=0;E<f;E++)y[E]>0?o+=T[E]:0===y[E]&&(l+=T[E]);if(s=te(T).length!==T.length,"zsplit"===t&&(o+=l/2),O=o,w=f*(f+1)*.25,x=f*(f+1)*(2*f+1),"pratt"===t){for(v=[],E=0;E<f;E++)0!==y[E]&&v.push(T[E]);T=v,w-=a*(a+1)*.25,x-=a*(a+1)*(2*a+1)}for(r=U(T),n=0,E=0;E<r.length;E++)r[E][1]>1&&(n+=(z=r[E][1])*(z*z-1));if(n>0&&(x-=.5*n),x=Y(x/24),f>50&&!p.exact||a>0||s){if(y=0,e)switch(c){case"two-sided":y=.5*X(O-w);break;case"less":y=-.5;break;default:y=.5}h=(O-w-y)/x,m="two-sided"===c?2*(1-se(Z(h))):"greater"===c?1-se(h):se(h)}else h=O,m="two-sided"===c?h>f*(f+1)/4?2*(1-Q(h-1,f)):2*Q(h,f):"greater"===c?1-Q(h-1,f):Q(h,f);return J(g={},"rejected",m<=d),J(g,"alpha",d),J(g,"pValue",m),J(g,"statistic",O),J(g,"nullValue",b),J(g,"alternative",c),J(g,"method",(V?"Paired":"One-Sample")+" Wilcoxon signed rank test"),J(g,"print",ie),g};export{re as default};
//# sourceMappingURL=index.mjs.map
