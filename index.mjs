// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{primitives as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number-array@v0.0.8-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-ranks@esm/index.mjs";import{factory as n}from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-normal-cdf@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-signrank-cdf@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-tabulate@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-signum@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-contains@esm/index.mjs";import{isPrimitive as c}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import{isPrimitive as j}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import{isPrimitive as u}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";var x=["two-sided","less","greater"],y=["pratt","wilcox","zsplit"];function E(e,t){if(!s(t))return new TypeError(f("0fs2h",t));if(v(t,"alpha")){if(e.alpha=t.alpha,!j(e.alpha)||g(e.alpha))return new TypeError(f("0fs8h","alpha",e.alpha));if(e.alpha<0||e.alpha>1)return new RangeError(f("invalid option. `%s` option must be a number on the interval: [0, 1]. Option: `%f`.","alpha",e.alpha))}if(v(t,"alternative")){if(e.alternative=t.alternative,!u(e.alternative))return new TypeError(f("0fs2i","alternative",e.alternative));if(!p(x,e.alternative))return new Error(f("0fs3t","alternative",x.join('", "'),e.alternative))}if(v(t,"correction")&&(e.correction=t.correction,!c(e.correction)||g(e.correction)))return new TypeError(f("0fs30","correction",e.alpha));if(v(t,"exact")&&(e.exact=t.exact,!c(e.exact)||g(e.exact)))return new TypeError(f("0fs30","exact",e.alpha));if(v(t,"mu")&&(e.mu=t.mu,!j(e.mu)||g(e.mu)))return new TypeError(f("0fs8h","mu",e.mu));if(v(t,"zeroMethod")){if(e.zeroMethod=t.zeroMethod,!u(e.zeroMethod))return new TypeError(f("0fs2i","zeroMethod",e.alternative));if(!p(y,e.zeroMethod))return new Error(f("0fs3t","zeroMethod",y.join('", "'),e.zeroMethod))}return null}function T(e,t){return e-t}function z(e){var t,r,s,i;for((e=e.slice()).sort(T),t=e.length,s=1,i=0;s<t;s++)r=e[s],e[i]!==r&&(e[i+=1]=r);return e.length=i+1,e}function M(e){var t,r,i;if(r=4,t=!0,arguments.length>0){if(!s(e))throw new TypeError(f("0fs3X",e));if(v(e,"digits")){if(!b(e.digits))throw new TypeError(f("0fs3b","digits",e.digits));r=e.digits}if(v(e,"decision")){if(!c(e.decision))throw new TypeError(f("0fs30","decision",e.decision));t=e.decision}}switch(i="",i+=this.method,i+="\n\n",i+="Alternative hypothesis: ","Paired Wilcoxon signed rank test"===this.method?i+="Median of the difference `x - y` is ":i+="Median of `x` is ",this.alternative){case"less":i+="less than ";break;case"greater":i+="greater than ";break;default:i+="not equal to "}return i+=this.nullValue,i+="\n\n",i+="    pValue: "+w(this.pValue,-r)+"\n",i+="    statistic: "+w(this.statistic,-r)+"\n",i+="\n",t&&(i+="Test Decision: ",this.rejected?i+="Reject null in favor of alternative at "+100*this.alpha+"% significance level":i+="Fail to reject null in favor of alternative at "+100*this.alpha+"% significance level",i+="\n"),i}var k=n(0,1);function V(){var n,p,c,j,u,g,v,b,w,x,y,T,V,P,q,A,O,R,W,D,F,H,Q,S,X,B,C,G,I;if(!t(G=arguments[0])&&!e(G))throw new TypeError(f("0fs8j",G));if(A=G.length,arguments.length>1)if(s(arguments[1]))c=arguments[1];else{if(!t(I=arguments[1])&&!e(I))throw new TypeError(f("invalid argument. `%s` argument must be a numeric array. Value: `%s`.","y",I));if(A!==I.length)throw new Error(f("0fs1H"));arguments.length>2&&(c=arguments[2])}if(T={},c&&(q=E(T,c)))throw q;if(D=T.mu||0,n=void 0===T.correction||T.correction,x=void 0===T.alpha?.05:T.alpha,A<2)throw new Error(f("0fsAn",G));if(P=T.alternative||"two-sided","wilcox"===(p=T.zeroMethod||"wilcox")){if(Q=[],I)for(S=0;S<A;S++)0!==(C=G[S]-I[S]-D)&&Q.push(C);else for(S=0;S<A;S++)0!==G[S]&&Q.push(G[S]-D);b=G.length-Q.length}else if(Q=new m(A),b=0,I)for(S=0;S<A;S++)Q[S]=G[S]-I[S]-D,0===Q[S]&&(b+=1);else for(S=0;S<A;S++)Q[S]=G[S]-D,0===Q[S]&&(b+=1);if(b===A)throw new Error(f("0fs1Q"));for(A=Q.length,W=new m(A),S=0;S<A;S++)W[S]=h(Q[S]);for(X=i(W),v=0,w=0,S=0;S<A;S++)Q[S]>0?v+=X[S]:0===Q[S]&&(w+=X[S]);if(j=z(X).length!==X.length,"zsplit"===p&&(v+=w/2),B=v,F=A*(A+1)*.25,H=A*(A+1)*(2*A+1),"pratt"===p){for(O=[],S=0;S<A;S++)0!==Q[S]&&O.push(X[S]);X=O,F-=b*(b+1)*.25,H-=b*(b+1)*(2*b+1)}for(u=o(X),g=0,S=0;S<u.length;S++)u[S][1]>1&&(g+=(C=u[S][1])*(C*C-1));if(g>0&&(H-=.5*g),H=d(H/24),A>50&&!T.exact||b>0||j){if(Q=0,n)switch(P){case"two-sided":Q=.5*l(B-F);break;case"less":Q=-.5;break;default:Q=.5}V=(B-F-Q)/H,y="two-sided"===P?2*(1-k(h(V))):"greater"===P?1-k(V):k(V)}else V=B,y="two-sided"===P?V>A*(A+1)/4?2*(1-a(V-1,A)):2*a(V,A):"greater"===P?1-a(V-1,A):a(V,A);return r(R={},"rejected",y<=x),r(R,"alpha",x),r(R,"pValue",y),r(R,"statistic",B),r(R,"nullValue",D),r(R,"alternative",P),r(R,"method",(I?"Paired":"One-Sample")+" Wilcoxon signed rank test"),r(R,"print",M),R}export{V as default};
//# sourceMappingURL=index.mjs.map
