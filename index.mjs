// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{primitives as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number-array@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-ranks@esm/index.mjs";import{factory as n}from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-normal-cdf@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-signrank-cdf@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-tabulate@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-signum@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import{factory as c}from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-contains@esm/index.mjs";import{isPrimitive as f}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import{isPrimitive as j}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import{isPrimitive as g}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";var b=["two-sided","less","greater"],y=["pratt","wilcox","zsplit"],E=c(b),L=c(y);function T(e,t){return e-t}function z(e){var t,r,i;if(r=4,t=!0,arguments.length>0){if(!s(e))throw new TypeError(p("1Lx3L",e));if(u(e,"digits")){if(!v(e.digits))throw new TypeError(p("1Lx3P","digits",e.digits));r=e.digits}if(u(e,"decision")){if(!f(e.decision))throw new TypeError(p("1Lx2o","decision",e.decision));t=e.decision}}switch(i="",i+=this.method,i+="\n\n",i+="Alternative hypothesis: ","Paired Wilcoxon signed rank test"===this.method?i+="Median of the difference `x - y` is ":i+="Median of `x` is ",this.alternative){case"less":i+="less than ";break;case"greater":i+="greater than ";break;default:i+="not equal to "}return i+=this.nullValue,i+="\n\n",i+="    pValue: "+w(this.pValue,-r)+"\n",i+="    statistic: "+w(this.statistic,-r)+"\n",i+="\n",t&&(i+="Test Decision: ",this.rejected?i+="Reject null in favor of alternative at "+100*this.alpha+"% significance level":i+="Fail to reject null in favor of alternative at "+100*this.alpha+"% significance level",i+="\n"),i}var M=n(0,1);function k(){var n,c,v,w,k,P,V,W,A,R,S,q,D,F,J,O,B,C,G,H,I,K,N,Q,U,X,Y,Z,$;if(!t(Z=arguments[0])&&!e(Z))throw new TypeError(p("1Lx8R",Z));if(O=Z.length,arguments.length>1)if(s(arguments[1]))v=arguments[1];else{if(!t($=arguments[1])&&!e($))throw new TypeError(p("1LxA5","y",$));if(O!==$.length)throw new Error(p("1Lx1E"));arguments.length>2&&(v=arguments[2])}if(q={},v&&(J=function(e,t){if(!s(t))return new TypeError(p("1Lx2V",t));if(u(t,"alpha")){if(e.alpha=t.alpha,!j(e.alpha)||x(e.alpha))return new TypeError(p("1Lx8P","alpha",e.alpha));if(e.alpha<0||e.alpha>1)return new RangeError(p("1Lx8V","alpha",e.alpha))}if(u(t,"alternative")){if(e.alternative=t.alternative,!g(e.alternative))return new TypeError(p("1Lx2W","alternative",e.alternative));if(!E(e.alternative))return new Error(p("1Lx4S","alternative",b.join('", "'),e.alternative))}if(u(t,"correction")&&(e.correction=t.correction,!f(e.correction)||x(e.correction)))return new TypeError(p("1Lx2o","correction",e.alpha));if(u(t,"exact")&&(e.exact=t.exact,!f(e.exact)||x(e.exact)))return new TypeError(p("1Lx2o","exact",e.alpha));if(u(t,"mu")&&(e.mu=t.mu,!j(e.mu)||x(e.mu)))return new TypeError(p("1Lx8P","mu",e.mu));if(u(t,"zeroMethod")){if(e.zeroMethod=t.zeroMethod,!g(e.zeroMethod))return new TypeError(p("1Lx2W","zeroMethod",e.alternative));if(!L(e.zeroMethod))return new Error(p("1Lx4S","zeroMethod",y.join('", "'),e.zeroMethod))}return null}(q,v),J))throw J;if(H=q.mu||0,n=void 0===q.correction||q.correction,R=void 0===q.alpha?.05:q.alpha,O<2)throw new Error(p("1LxA2",Z));if(F=q.alternative||"two-sided","wilcox"===(c=q.zeroMethod||"wilcox")){if(N=[],$)for(Q=0;Q<O;Q++)0!==(Y=Z[Q]-$[Q]-H)&&N.push(Y);else for(Q=0;Q<O;Q++)0!==Z[Q]&&N.push(Z[Q]-H);W=Z.length-N.length}else if(N=new m(O),W=0,$)for(Q=0;Q<O;Q++)N[Q]=Z[Q]-$[Q]-H,0===N[Q]&&(W+=1);else for(Q=0;Q<O;Q++)N[Q]=Z[Q]-H,0===N[Q]&&(W+=1);if(W===O)throw new Error(p("1Lx1J"));for(O=N.length,G=new m(O),Q=0;Q<O;Q++)G[Q]=h(N[Q]);for(U=i(G),V=0,A=0,Q=0;Q<O;Q++)N[Q]>0?V+=U[Q]:0===N[Q]&&(A+=U[Q]);if(w=function(e){var t,r,s,i;for((e=e.slice()).sort(T),t=e.length,s=1,i=0;s<t;s++)r=e[s],e[i]!==r&&(e[i+=1]=r);return e.length=i+1,e}(U).length!==U.length,"zsplit"===c&&(V+=A/2),X=V,I=O*(O+1)*.25,K=O*(O+1)*(2*O+1),"pratt"===c){for(B=[],Q=0;Q<O;Q++)0!==N[Q]&&B.push(U[Q]);U=B,I-=W*(W+1)*.25,K-=W*(W+1)*(2*W+1)}for(k=o(U),P=0,Q=0;Q<k.length;Q++)k[Q][1]>1&&(P+=(Y=k[Q][1])*(Y*Y-1));if(P>0&&(K-=.5*P),K=d(K/24),O>50&&!q.exact||W>0||w){if(N=0,n)switch(F){case"two-sided":N=.5*l(X-I);break;case"less":N=-.5;break;default:N=.5}D=(X-I-N)/K,S="two-sided"===F?2*(1-M(h(D))):"greater"===F?1-M(D):M(D)}else D=X,S="two-sided"===F?D>O*(O+1)/4?2*(1-a(D-1,O)):2*a(D,O):"greater"===F?1-a(D-1,O):a(D,O);return r(C={},"rejected",S<=R),r(C,"alpha",R),r(C,"pValue",S),r(C,"statistic",X),r(C,"nullValue",H),r(C,"alternative",F),r(C,"method",($?"Paired":"One-Sample")+" Wilcoxon signed rank test"),r(C,"print",z),C}export{k as default};
//# sourceMappingURL=index.mjs.map
